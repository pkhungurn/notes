\documentclass[10pt]{article}
\usepackage{fullpage}
\usepackage{amsmath}
\usepackage[amsthm, thmmarks]{ntheorem}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{enumerate}
\usepackage{verse}
\usepackage{tikz}
\usepackage{verbatim}
\usepackage{hyperref}

\newtheorem{lemma}{Lemma}
\newtheorem{theorem}[lemma]{Theorem}
\newtheorem{definition}[lemma]{Definition}
\newtheorem{proposition}[lemma]{Proposition}
\newtheorem{corollary}[lemma]{Corollary}
\newtheorem{claim}[lemma]{Claim}
\newtheorem{example}[lemma]{Example}

\def\sc#1{\dosc#1\csod}
\def\dosc#1#2\csod{{\rm #1{\small #2}}}

\newcommand{\dee}{\mathrm{d}}
\newcommand{\Dee}{\mathrm{D}}
\newcommand{\In}{\mathrm{in}}
\newcommand{\Out}{\mathrm{out}}
\newcommand{\pdf}{\mathrm{pdf}}
\newcommand{\Cov}{\mathrm{Cov}}
\newcommand{\Var}{\mathrm{Var}}

\newcommand{\ve}[1]{\mathbf{#1}}
\newcommand{\mrm}[1]{\mathrm{#1}}
\newcommand{\ves}[1]{\boldsymbol{#1}}
\newcommand{\etal}{{et~al.}}
\newcommand{\sphere}{\mathbb{S}^2}
\newcommand{\modeint}{\mathcal{M}}
\newcommand{\azimint}{\mathcal{N}}
\newcommand{\ra}{\rightarrow}
\newcommand{\mcal}[1]{\mathcal{#1}}
\newcommand{\X}{\mathcal{X}}
\newcommand{\Y}{\mathcal{Y}}
\newcommand{\Z}{\mathcal{Z}}
\newcommand{\x}{\mathbf{x}}
\newcommand{\y}{\mathbf{y}}
\newcommand{\z}{\mathbf{z}}
\newcommand{\tr}{\mathrm{tr}}
\newcommand{\sgn}{\mathrm{sgn}}
\newcommand{\diag}{\mathrm{diag}}
\newcommand{\Real}{\mathbb{R}}
\newcommand{\sseq}{\subseteq}
\newcommand{\ov}[1]{\overline{#1}}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

\title{A Primer on Measure Theory}
\author{Pramook Khungurn}

\begin{document}
\maketitle

This is a primer on measure theory and Lebesgue integration. The materials are taken from Bartle's ``The Elements Of Integration And Lebesgue Measure'' \cite{Bartle:1995} and Hunter's note on measure theory \cite{Hunter:2011}.

\section{Introduction}

\begin{itemize}
  \item Why do we care about measure theory and Lebesgue integration?
  \begin{itemize}
    \item They expand the class of functions for which integrations are defined compared to what can be achieved by Riemann integration.
    
    \item Theorems relating to the intechange of limits and integrals are valid under less stringent conditions (again, compared to Reimann integration).
    
    \item In particular, the dominated convergence theorem \footnote{\url{https://en.wikipedia.org/wiki/Dominated_convergence_theorem}} is a very powerful tool. For examples, it can be use to easily show that
    \begin{align*}
      \lim_{n \rightarrow \infty} \int_{0}^\infty \frac{e^{-nx}}{\sqrt{x}}\, \dee x = 0
    \end{align*}
    and
    \begin{align*}
        \frac{\dee}{\dee x} \int_{0}^\infty x^2 e^{-tx}\, \dee x = -\int_0^\infty x^3 e^{-tx}\, \dee x.
    \end{align*}
    
    \item Measure theory is the foundation of modern probability theory, and the dominated convergence theorem shows up everywhere in it.
  \end{itemize}
  
  \item How is Lebesgue integration different from Reimann integration?
  \begin{itemize}
    \item Riemann integrals are defined in terms of approximating a function with constant functions over intevals.
    
    \item An {\bf interval} is a subset of the real line which is of one of the following forms:
    \begin{align*}
        [a,b] &= \{ x \in \Real: a \leq x \leq b \}, \\
        [a,b) &= \{ x \in \Real: a \leq x < b \}, \\
        (a,b] &= \{ x \in \Real: a < x \leq b \}, \\
        (a,b) &= \{ x \in \Real: a < x < b \}.
    \end{align*}
    The real number $a$ and $b$ are said to be the {\bf endpoints} of the interval, and $b-a$ is the {\bf length} of the interval.
      
    \item A {\bf step function} $\varphi$ is a linear combination of a finite number of characteristic functions of intevals.
    \begin{align*}
        \varphi(x) = \sum_{i=1}^n c_j \chi_{E_j}(x)
    \end{align*}
    where $c_j \in \Real$ and each $E_j$ is an interval with endpoints $a_j$ and $b_j$. 

    \item The integral of a step function $\varphi$ is defined to be $$ \int \varphi = \sum_{i=1}^n c_j(b_j - a_j).$$
    
    \item If $f$ is a bounded function on $[a,b]$, then the {\bf Reimann integral} is defined to the limit of the integrals of step functions that approximate $f$.
    
    \item The {\bf lower Rieman integral} is defined to be the supremum of integrals of all step functions $\phi$ such that $\phi(x) \leq f(x)$ for all $x \in [a,b]$ and $\phi(x) = 0$ for all $x \not\in [a,b]$.
  \end{itemize}

  \item The Lebesgue integral is defined similarly, with some differences.
  \begin{itemize}
    \item Intervals are replaced by a larger collection of sets (called {\bf measurable sets}).
    
    \item The notion of ``length'' is generalize to the notation of {\bf measure}.
    \begin{itemize}
      \item Here, the measure is a function $\mu$ that maps a set of a non-negative real number.
    \end{itemize}
    
    \item The step function is replaced by the {\bf simple function}, which is a finite linear combination of characteristic functions of measurable sets.
    \begin{align*}
        \varphi(x) = \sum_{j=1}^n c_j \chi_{E_j}(x)
    \end{align*}
    where each $E_j$ is a measurable set. The integral of $\phi$ is defined to be
    \begin{align*}
        \int \varphi = \sum_{j=1}^n c_j \mu(E_j).
    \end{align*}

    \item If $f$ is a non-negative function defined on $\Real$, then the {\bf Lebesgue integral} of $f$ is the supremum of all simple functions $\phi$ such that $\phi(x) \leq f(x)$ for all $x \in \Real$.
    \begin{itemize}
      \item This notation can later be generalized to functions taking both signs.
    \end{itemize}    
  \end{itemize}

  \item When studying integration, it is convenient to work with the {\bf extended real number system} $\overline{\Real} = \Real \cup \{-\infty, \infty\}$.
  \begin{itemize}
    \item For any $x \in \Real$, we have that $-\infty < x < \infty$.
    \item We say that the length of the real line is $\infty$.
    \item We define the supremum of non-empty set of real numbers which does not have an upper bound to be $\infty$, and the infemum of the a non-empty set of real numbers which does not have a lower bound to be $-\infty$.
    \begin{itemize}
      \item In this way, all non-empty sets of real numbers (or subsets of $\overline{\Real}$) have unique supremums and infemums.
    \end{itemize}
    \item The arithematic operations between the infiniites and real numbers are as follows:
    \begin{align*}
        (\pm \infty) + (\pm \infty) = x + (\pm \infty) = (\pm \infty) + x &= \pm \infty \\
        (\pm \infty) (\pm \infty) &= +\infty \\
        (\pm \infty) (\mp \infty) &= -\infty \\        
        (\pm \infty) x = x (\pm \infty) &= \begin{cases}
            \pm \infty, & \mbox{if } x > 0, \\
            0, &\mbox{if } x = 0, \\
            \mp \infty, & \mbox{if } x < 0
        \end{cases}        
    \end{align*}
    for any (finite) real number $x$.
    \item Note that we do not define $(\pm \infty) - (\pm \infty)$. We also do not define quotients when the denominators are $\pm \infty$.  
  \end{itemize}
  
  \item If $(x_n)$ is a sequence of extended real numbers, define the {\bf limit superior} and {\bf limit inferior} by
  \begin{align*}
      \limsup_{n \rightarrow \infty}\ x_n &= \lim_{n \rightarrow \infty} \Big( \sup_{m \geq n} x_m \Big) = \inf_{n} \Big( \sup_{m \geq n} x_m \Big) \\
      \liminf_{n \rightarrow \infty}\ x_n &= \lim_{n \rightarrow \infty} \Big( \inf_{m \geq n} x_m \Big) = \sup_{n} \Big( \inf_{m \geq n} x_m \Big).
  \end{align*}
  If the limit superior and limit inferere of a sequence both exist and are equal, then the {\bf limit} of the sequence exists and is equal to that value.
\end{itemize}

\section{Measures}

\begin{itemize}
  \item Let us denote the power set of set $X$ with $\mcal{P}(X)$.
  
  \item A $\sigma$-algebra is the domain upon which we define measures. It is a collection of sets with some nice properties.
  
  \begin{definition}    
    A {\bf $\sigma$-algebra} (or a {\bf $\sigma$-field}) on a set $X$ is a collection $\mcal{X} \in \mcal{P}(X)$ of subsets of $X$, called {\bf measurable sets}, such that the following properties hold.
    \begin{enumerate}
      \item $\emptyset, X \in \mcal{X}$.
      \item If $A \in \mcal{X}$, then so is its complement. That is, $A^c = X - A \in \mcal{X}$.
      \item If $(A_n)$ is a sequence of sets in $\mcal{X}$, then
      \begin{align*}
        \bigcup_{n=1}^\infty A_n &\in \mcal{X}.        
      \end{align*}
    \end{enumerate}
  \end{definition}

  \item For a $\sigma$-algebra, we can show that
  \begin{align*}
    \bigcap_{i=1}^\infty A_n &\in \mcal{X}
  \end{align*}
  as well. To see this, we note that $A_n^c \in \mcal{X}$ for all $n \in \mathbb{N}$, and so
  \begin{align*}
    \bigcup_{i=1}^\infty A_n^c &\in \mcal{X}
  \end{align*}
  As result,
  \begin{align*}
    \bigg( \bigcup_{i=1}^\infty A_n^c \bigg)^c &\in \mcal{X}.
  \end{align*}
  Applying de Morgan's law, we have that
  \begin{align*}
    \bigcap_{i=1}^\infty A_n = \bigg( \bigcup_{i=1}^\infty A_n^c \bigg)^c  &\in \mcal{X}.
  \end{align*}

  \item \begin{definition}
    A measurable space $(X, \mcal{X})$ is a non-empty set $X$ equipped with a $\sigma$-algebra $\mcal{X}$ on $X$.
  \end{definition}

  \item \begin{definition}
  Let $\mcal{A}$ be a non-empty collection of subsets of $X$. The {\bf $\sigma$-algebra generated by $\mcal{A}$}, denoted by $\sigma(\mcal{A})$ is the smallest $\sigma$-algebra that contains $\mcal{A}$. In other words,
  \begin{align*}
    \sigma(\mcal{A}) = \bigcap\Big\{\tilde{\mcal{A}} \subseteq \mcal{P}(X) : \mcal{A} \subseteq \tilde{\mcal{A}} \mbox{ and $\tilde{\mcal{A}}$ is a $\sigma$-algebra}\Big\}.
  \end{align*}
  \end{definition}

  \item \begin{definition}\label{def:borel-algebra}
    The {\bf Borel algebra} is the $\sigma$-algebra $\mcal{B}$ generated by all the open intervals $(a,b)$ in $\Real$. Any set in $\mcal{B}$ is called a {\bf Borel set}.
  \end{definition}

  \item Observe that we can write any open interval $(a,b)$ as a countable unions of closed intervals:
  \begin{align*}    
    (a,b) = \bigcup_{n \geq N}^\infty \bigg[ a + \frac{1}{n}, b - \frac{1}{n} \bigg]
  \end{align*}
  where $N$ is an integer such that $b - a - \frac{2}{N} > 0$. As a result, $\mcal{B}$ is also generated by the collection of close intervals $[a,b]$ in $\Real$. The same is also true for half-open intervals of the form $(a,b]$ and $[a,b)$.
  
  \item Let $X$ be the set $\overline{\Real}$ of extended real numbers. If $E$ is a Borel set, then define
  \begin{align*}
    E_1 &= E \cup \{ \infty \} \\
    E_2 &= E \cup \{ -\infty \} \\
    E_3 &= E \cup \{ -\infty, \infty \}
  \end{align*}
  Let $\overline{\mcal{B}}$ the collection of all sets $E$, $E_1$, $E_2$, and $E_3$ as $E$ varies over $\mcal{B}$. We have that $\overline{B}$ is a $\sigma$-algebra, and it is called the {\bf extended Borel algebra}.  

  \item A ``measure'' encapsulates the notion of length, area, volume, mass, etc. of a set.
  
  \begin{definition}
    Let $(X, \mcal{X})$ be a measurable space. A {\bf measure} is a function $\mu: \mcal{X} \rightarrow [0, \infty]$ with the following properties.
    \begin{enumerate}
      \item $\mu(\emptyset) = 0$.
      \item $\mu$ is {\bf countably additive}. That is, for a sequence $(E_n)$ of disjoint sets, it holds that
      \begin{align*}
        \mu\bigg( \bigcup_{n=1}^\infty E_n \bigg) = \sum_{n=1}^\infty \mu(E_n).
      \end{align*}
    \end{enumerate}
  \end{definition}
  
  \item If $\mu(E) < \infty$ for all $E \in \mcal{X}$, we say that $\mu$ is {\bf finite}.
  
  \item A {\bf probability measure} is a finite measure with $\mu(X) = 1$.
  
  \item If there exists a sequence $(E_n)$ of sets in $\mcal{X}$ with $\bigcup_{i=1}^\infty E_n = X$ and such that $\mu(E_n) < \infty$ for all $n$, then we say that $\mu$ is {\bf $\sigma$-finite}.
  
  \item Here is an example of a measure that is $\sigma$-finite but not finite. Let $X = \mathbb{N}$, and $\mcal{X} = \mcal{P}(\mathbb{N})$. Define $\mu(E)$ to be the number of elements in $E$ with the convention that $\mu(E) = \infty$ when $E$ is infinite. Obviously, $\mu(\mathbb{N}) = \infty$. However, $\mathbb{N} = \{ 1 \} \cup \{ 2 \} \cup \dotsb$, and $\mu(\{ n \}) = 1$ for all $n \in \mathbb{N}$. The measure $\mu$ is called the {\bf counting measure} on $\mathbb{N}$.

  \item \begin{proposition}
    Let $\mu$ be a measure defined on a $\sigma$-algebra $\mcal{X}$. Let $E, F \in \mcal{X}$ be such that $E \subseteq F$, then $\mu(E) \leq \mu(F)$. If $\mu(E) < \infty$, then $\mu(F - E) = \mu(F) - \mu(E)$.
  \end{proposition}

  \begin{proof}
    Since $F = E \cup (F - E)$ and $E \cap (F - E) = \emptyset$, it follows that
    \begin{align*}
        \mu(F) = \mu(E) + \mu(F - E).
    \end{align*}
    Because $\mu(F - E) \geq 0$, it follows that $\mu(F) \geq \mu(E)$. If $\mu(E) < \infty$, we can subtract from both sides of the equation.
  \end{proof}

  \item A sequence of sets $(E_n)$ is {\bf increasing} if $E_n \subseteq E_{n+1}$ for all $n$.
  
  \item A sequence of sets $(E_n)$ is {\bf decreasing} if $E_{n} \supseteq E_{n+1}$ for all $n$.
  
  \item \begin{proposition}
  If $(E_n)$ is an increasing sequence of measurable sets, then
  \begin{align*}
      \mu\bigg( \bigcup_{n=1}^\infty E_n \bigg) = \lim_{n\rightarrow \infty} \mu(E_n).
  \end{align*}
  If $(E_n)$ is a decreasing sequence of measurable sets and $\mu(E_1) < \infty$, then
  \begin{align*}
    \mu\bigg( \bigcap_{n=1}^\infty E_n \bigg) = \lim_{n\rightarrow \infty} \mu(E_n).
  \end{align*}
  \end{proposition}

  \begin{proof}
    Let $(E_n)$ be increasing. Set $F_0 = E_1$, and $F_n = E_{n+1} - E_n$ for all $n \geq 1$. We have that $(F_n)$ is a sequence of disjoint sets. So,
    \begin{align*}
      \mu \bigg( \bigcup_{n=1}^\infty E_n \bigg)
      = \mu \bigg( \bigcup_{n=0}^\infty F_n \bigg)
      = \sum_{n=0}^\infty \mu(F_n)
    \end{align*}
    Also because $E_n = \bigcup_{i=0}^n F_i$, we have that
    \begin{align*}
        \mu(E_n) = \sum_{i=0}^n \mu(F_i).
    \end{align*}
    So,
    \begin{align*}
      \mu \bigg( \bigcup_{n=1}^\infty E_n \bigg)
      = \sum_{n=0}^\infty \mu(F_n)
      = \lim_{n \rightarrow \infty} \sum_{i=0}^n \mu(F_i)
      = \lim_{n \rightarrow \infty} \mu(E_n).
    \end{align*}

    Next, let $(E_n)$ be decreasing and $\mu(E_1) < \infty$. Let $F_n = E_1 - E_n$. We have that $(F_n)$ is increasing and $\mu(F_n) = \mu(E_1) - \mu(E_n)$. If follows that
    \begin{align*}
      \mu\bigg( \bigcup_{n=1}^\infty F_n \bigg) 
      = \lim_{n \rightarrow \infty} \mu(F_n) 
      = \lim_{n \rightarrow \infty} \mu(E_1) - \mu(E_n)
      = \mu(E_1) - \lim_{n \rightarrow \infty} \mu(E_n)
    \end{align*}
    Now, 
    \begin{align*}
      \bigcap_{n=1}^\infty E_n
      &= E_1 - \bigcup_{n=1}^\infty F_n
    \end{align*}
    So,
    \begin{align*}
      \mu\bigg( \bigcap_{n=1}^\infty E_n \bigg)
      &= \mu(E_1) - \mu\bigg( \bigcup_{n=1}^\infty F_n \bigg) 
      = \mu(E_1) - \bigg( \mu(E_1) - \lim_{n \rightarrow \infty} \mu(E_n) \bigg)
      = \lim_{n \rightarrow \infty} \mu(E_n)
    \end{align*}
    are required. 
  \end{proof}

  \item \begin{definition}
    A {\bf measure space} is a triple $(X, \mcal{X}, \mu)$ where $X$ is a non-empty set, $\mcal{X}$ is a $\sigma$-algebra on $X$, and $\mu$ is a measure on $\mcal{X}$.
  \end{definition}

  \item \begin{definition}
    In a measure space $(X, \mcal{X}, \mu)$, a set $N \in \mcal{X}$ is set to be of {\bf measure zero} or a {\bf null set} if $\mu(N) = 0$. A property that holds on $N^c$ is said to hold {\bf $\mu$-almost everywhere}. In the context where $\mu$ is clear, we says that a property holds just {\bf almost everywhere}.
  \end{definition}

  \item For examples, we say that two functions $f$ and $g$ are equal almost everywhere if $f(x) = g(x)$ for all $x \not\in N$ where $N$ is a set of measure zero. We also say that a sequence of functions $(f_n)$ converges almost everywhere in $X$ if $\lim_{n \rightarrow \infty} f_n(x)$ exists for all $x \not\in N$.
  
  \item \begin{definition}
    A measure space $(X, \mcal{X}, \mu)$ is {\bf complete} if every subset of a set of measure zero is measureable.
  \end{definition}

  \item \begin{theorem}
    Let $(X, \mcal{X}, \mu)$ be a measure space. Define $(X, \overline{\mcal{X}}, \overline{\mu})$ by
    \begin{align*}
      \overline{\mcal{X}} = \{ A \cup M : A \in \mcal{X}, M \subseteq N \mbox{ where } N \in \mcal{X} \mbox{ and } \mu(N) = 0 \}
    \end{align*}
    and 
    \begin{align*}
      \overline{\mu}(A \cup M) = \mu(A).
    \end{align*}
    Then, $(X, \overline{\mcal{X}}, \overline{\mu})$ is a complete measure space such that $\mcal{X} \subseteq \overline{X}$ and $\overline{\mu}$ is the unique extension of $\mu$ to $\overline{X}$.
  \end{theorem}

  \begin{proof}[Proof (sketch)]
    The hardest bit of the proof is to show that $\overline{\mcal{X}}$ is close under complementation. Let $A \in \mcal{X}$, $N \in \mcal{X}$ be a set of measure zero, and $M \subseteq N$. We have that $(A \cup M)^c = A^c \cap M^c$. Because $M^c = N^c \cup (N - M)$, we have that
    \begin{align*}
      (A \cup M)^c = A^c \cap M^c = A^c \cap ( N^c \cup (N-M) ) = (A^c \cap N^c) \cup (A^c \cap (N-M)).
    \end{align*}
    We note that $A^c \cap N^c \in \mcal{X}$ and $A^c \cap (N - M) \subseteq N$, so $(A \cup M)^C \in \overline{\mcal{X}}$. The other parts of the proof seems straightforward, and we refer to \cite{Hunter:2011} for a longer proof sketch.
  \end{proof}
\end{itemize}

\section{Lebesgue Measure on the Real Line}

\begin{itemize}
  \item The Lebesgue measure on $\Real$ is a measure that corresponds to the notion of ``length'' on the real line. We will construct it in this section.
  
  \item The natural notion of {\bf length} can be defined as follows.
  \begin{itemize}
    \item Let $\ell$ denote the length function.
    \item The length of the half-open interval $(a,b]$ is defined to be $b - a$. 
    \item The lengths of $(-\infty, b]$, $(a, +\infty)$, and $(-\infty, \infty)$ are defined to be $\infty$.
    \item The length of the union of a finite number of disjoint sets of intervals of these forms is defined to be the sum of the corresponding lengths.
    \begin{align*}
      \ell \bigg( \bigcup_{i=1}^n (a_i, b_n] \bigg) = \sum_{i=1}^n (b_i - a_i).
    \end{align*}  
  \end{itemize}

  \item Let $\mcal{F}$ be the collection of subsets of $\Real$ that contains all intervals of the forms
  \begin{align}
    (a,b], (-\infty,b], (a,\infty), (\infty,\infty) \label{half-open-intervals-spec}, 
  \end{align} and all the finite unions of such intervals.  

  \item By the notion above, we have that $\ell$ is a function of signature $\mcal{F} \rightarrow [0,\infty]$. However, we cannot claim that it is a measure (1) we have not defined how to deal with countable unions of such intervals yet, and (2) we have not identified the $\sigma$-algebra upon which it acts.
  
  \item Furthermore, we cannot claim that $\mcal{F}$ is a $\sigma$-algebra. However, $\mcal{F}$ is a mathematical structure with a number of nice properties, so we shall give it a name.

  \item \begin{definition}
    A family $\mcal{A}$ of subsets of a set $X$ is said to be an {\bf algebra} or a {\bf field} on $X$ if the following properties are satisfied.
    \begin{enumerate}
      \item $\emptyset, X \in \mcal{A}$.
      \item If $E \in \mcal{A}$, then $E^c = X-E \in \mcal{A}$.
      \item If $E_1, E_2, \dotsc, E_n \in \mcal{A}$, then $\bigcup_{i=1}^n E_i \in \mcal{A}$.
    \end{enumerate}
  \end{definition}  
  
  \item We have that $\mcal{F}$ is an algebra on $\Real$.
  \begin{itemize}
    \item $\emptyset \in \mcal{F}$ because $\emptyset = \{ x : 1 < x \leq 1 \} = (1,1]$.
    \item $\Real = (-\infty, \infty) \in \mcal{F}$ by definition.
    \item $\mcal{F}$ is closed under complementation.
    \begin{itemize}
      \item $(-\infty,b]^c = (b,\infty) \in \mcal{F}$.
      \item $(a,\infty)^c = (-\infty,a] \in \mcal{F}$.
      \item $(a,b]^c = (\infty,a] \cup (b,\infty) \in \mcal{F}$.
      \item $\emptyset$ and $(-\infty,\infty)$ are in $\mcal{F}$.
    \end{itemize}

    \item $\mcal{F}$ is closed under finite unions by definition.
  \end{itemize}

  \item We now turn back to the length function $\ell$. It turns out that we can show that it has more nice properties that are worthy of being encapsulated with an abstraction.

  \item \begin{definition}
    Let $\mcal{A}$ be an algebra on $X$. A {\bf premeasure} on $\mcal{A}$ is an extended real valued function $\mu$ defined on $\mcal{A}$ that satisfies the following properties.
    \begin{enumerate}
      \item $\mu(\emptyset) = 0$.
      \item $\mu(E) \geq 0$ for all $E \in \mcal{A}$.
      \item If $(E_n)$ is any disjoint sequence of sets in $\mcal{A}$ such that $\bigcup_{i=n}^\infty E_n$ belongs to $\mcal{A}$, then
      \begin{align*}
        \mu\bigg( \bigcup_{n=1}^\infty E_n \bigg) = \sum_{n=1}^\infty \mu(E_n).
      \end{align*}
    \end{enumerate}
  \end{definition}

  \item \begin{lemma}
  The length function $\ell$ is a premeasure on $\mcal{F}$.
  \end{lemma}

  \begin{proof}
    First, $\ell(\emptyset) = \ell((1,1]) = 1 - 1 = 0$.

    Second, if $E \in \mcal{F}$, then $\mcal{E}$ is a finite union of intervals of the forms in \eqref{half-open-intervals-spec}. We can subdivide these intervals into disjoint pieces, and the length of the union is the sum of the length of the individual pieces, each of which is non-negative. So, we have that $\mu(E) \geq 0$.

    Lastly, suppose that $(E_n)$ is a sequence of disjoint sets in $\mcal{F}$ such that $\bigcup_{i=n}^\infty E_n$ is also in $\mcal{F}$. Note that $\bigcup_{i=n}^\infty E_n$ is a finite union of intervals, so we can again partition them into disjoint pieces, each of which is of a form in \eqref{half-open-intervals-spec}. Each piece is now a union of a countable collection of disjoint elements of $\mcal{F}$. WLOG, we may treat each of the $E_n$'s as an interval which is disjoint from any other. Our goal now would be to show that the lengths of the constituent intervals add up to the length of the piece.

    A piece can be any of the 4 types. We will only deal with the $(a,b]$ type in this proof as the proof of other types are similar. Suppose, then, that
    \begin{align*}
      (a,b] = \bigcup_{j=1}^\infty (a_j, b_j]
    \end{align*}
    where the intervals are disjoint. Consider the first $n$ intervals. We may assume that
    \begin{align*}
      a \leq a_1 < b_1 \leq a_2 < b_2 \leq \dotsb \leq a_n < b_n \leq b.
    \end{align*}
    We have that
    \begin{align*}
      \sum_{i=1}^n \ell((a_i, b_i]) = \sum_{i=1}^n (b_i - a_i) \leq b_n - a_1 \leq b-a = \ell((a,b]).
    \end{align*}
    Because $n$ is arbitrary, we have that    
    \begin{align*}
      \sum_{i=1}^\infty \ell((a_i, b_i]) \leq \ell((a,b]).
    \end{align*}

    For the other direction, let $\varepsilon > 0$ be arbitrary. Let $(\varepsilon_j)$ be a sequence of positive numbers with $\sum \epsilon_j < \varepsilon / 2$. Consider the interval $I_j = (a_j - \varepsilon_j, b_k + \varepsilon_j)$. The collection $\{I_j\}$ of open sets is a cover of the interval $[a,b]$. Since $[a,b]$ is compact, it has a finite subcover, say, $I_1$, $I_2$, $\dotsc$, $I_m$. By reordering and discarding some intervals, we may assume that
    \begin{align*}
      a_1 - \varepsilon_1 &< a \\
      b &< b_m + \varepsilon_m \\
      a_j - \varepsilon_j &< b_{j-1} + \varepsilon_{j-1}.
    \end{align*}
    If follows that
    \begin{align*}
      b - a 
      \leq (b_m + \varepsilon_m) - (a_1 - \varepsilon_1) 
      \leq \sum_{j=1}^m [(b_j + \varepsilon_j) - (a_j - \varepsilon_j) ]
      \leq \varepsilon + \sum_{j=1}^m (b_j - a_j) 
      \leq \varepsilon + \sum_{j=1}^\infty (b_j - a_j).
    \end{align*}
    Since $\epsilon > 0$ is arbitrary, it follows that
    \begin{align*}
      \ell((a,b]) \leq \sum_{i=1}^\infty \ell((a_i, b_i]).
    \end{align*}
    As a result, $\ell((a,b]) = \sum_{i=1}^\infty \ell((a_i, b_i])$.

    Combining the results of all cases, we can conclude that $\ell$ is countably additive in $\mcal{F}$.
  \end{proof}

  \item The good news is that, given a premeasure $\mu$ on an algebra $\mcal{A}$, we can show that $\mu$ can be extended to a measure on a $\sigma$-algebra.
  \begin{itemize}
    \item In other words, there exist a $\sigma$-algebra $\mcal{A}^*$ containing $\mcal{A}$ and a measure $\mu^*$ defined on $\mcal{A}^*$ such that $\mu^*(E) = \mu(E)$ for all $E \in \mcal{A}$. 
  \end{itemize}
  As a result, we can extend our $\ell$ so that it becomes a measure on a $\sigma$-algebra.

  \item The way to extend a premeasure $\mu$ is as follows.
  \begin{definition}
    Given a premeasure $\mu$ defined on an algebra $\mcal{A}$ on set $X$, define $\mu^*: \mcal{P}(\ve{X}) \rightarrow [0,\infty]$ to be
    \begin{align*}
      \mu^*(B) = \inf \bigg\{ \sum_{j=1}^\infty \mu(E_j) : (E_j) \in \mathfrak{C}(B) \bigg\}
    \end{align*}
    where $\mathfrak{C}(B)$ is the set of all sequences $(E_j)$ of sets in $\mcal{A}$ such that $B \subseteq \bigcup_{j=1}^\infty E_j$.
  \end{definition}

  \item \begin{lemma} \label{lemma:mu-prime-property}
    The function $\mu^*$ has the following properties.
    \begin{enumerate}
      \item[(a)] $\mu^*(\emptyset) = 0$.
      \item[(b)] $\mu^*(B) \geq 0$ for any $B \subseteq X$.
      \item[(c)] If $A \subseteq B$, then $\mu^*(A) \leq \mu^*(B)$.
      \item[(d)] If $A \in \mcal{A}$, then $\mu^*(A) = \mu(A)$.
      \item[(e)] If $(B_n)$ is a sequence of subsets of $X$, then
      \begin{align*}
        \mu^*\bigg( \bigcup_{n=1}^\infty B_n \bigg) \leq \sum_{i=1}^\infty \mu^*(B_n).
      \end{align*}
    \end{enumerate}
  \end{lemma}

  \begin{proof}
    Let us call a sequence $(E_j) \in \mathfrak{C}(B)$ a {\emph cover} of $B$.

    For (b), recall that $\mu$ is a measure, so $\mu(E_j) \geq 0$ for all $j$. Hence, $\sum \mu(E_j) \geq 0$ for any sequence $(E_j)$. As a result, $\mu^*(B) = \inf\{ \sum \mu(E_j) : (E_j) \in \mathfrak{C}(\emptyset) \} \geq 0$.

    For (a), note that the sequence $(\emptyset, \emptyset, \dotsc)$ is a cover of $\emptyset$, so $\mu^*(\emptyset) = \inf\{ \sum \mu(E_j) : (E_j) \in \mathfrak{C}(\emptyset) \} \leq 0.$ However, from (b), we have that $\mu^*(\emptyset) \geq 0$, so $\mu^*(\emptyset) = 0$.

    For (c), let $A \subseteq B$. Let $(E_j) \in \mathfrak{C}(B)$. We have that $A \subseteq B \subseteq \bigcup E_j$, so $(E_j) \in \mathfrak{C}(A)$ too. It follows that $\mathfrak{C}(A) \supseteq \mathfrak{C}(B)$, which implies that
    \begin{align*}
      \bigg\{ \sum \mu(E_j) : (E_j) \in \mathfrak{C}(A) \bigg\} \supseteq \bigg\{ \sum \mu(E_j) : (E_j) \in \mathfrak{C}(B) \bigg\},
    \end{align*}
    and so
    \begin{align*}
      \mu^*(A) = \inf\bigg\{ \sum \mu(E_j) : (E_j) \in \mathfrak{C}(A) \bigg\} \leq \inf\bigg\{ \sum \mu(E_j) : (E_j) \in \mathfrak{C}(B) \bigg\} = \mu^*(B).
    \end{align*}

    For (d), let $A \in \mcal{A}$. We have that $\{A, \emptyset, \emptyset, \dotsc)$ is a cover of $A$. As a result,
    \begin{align*}
      \mu^*(A) \leq \mu(A) + \mu(\emptyset) + \mu(\emptyset) + \dotsb = \mu(A).
    \end{align*}
    Let $(E_j)$ be a cover of $A$. We have that $A = \bigcup (A \cap E_j)$. Because $\mu$ is a measure,
    \begin{align*}
      \mu(A) \leq \sum_{j=1}^\infty \mu(A \cap E_j) \leq \sum_{j=1}^\infty \mu(E_j).
    \end{align*}
    It follows that $\mu(A) \leq \inf\{ \sum \mu(E_j) : (E_j) \in \mathfrak{C}(A) \} = \mu^*(A)$. Hence, $\mu(A) = \mu^*(A)$.

    For (e), let $\varepsilon > 0$ be arbitrary. For each $n$, choose a sequence $(E_{nk})$ of sets in $\mcal{A}$ such that $(E_{nk})$ covers $B_n$ and
    \begin{align*}
      \sum_{k=1}^\infty \mu(E_{nk}) \leq \mu^*(B_n) + \frac{\varepsilon}{2^n}.
    \end{align*}
    Since $\{ E_{nk}: n, k \in \mathbb{N} \}$ is a countable collection from $\mcal{A}$ whose union contains $\bigcup B_n$, it follows that
    \begin{align*}
      \mu^*\bigg( \bigcup_{n=1}^\infty B_n \bigg)
      \leq \sum_{n=1}^\infty \sum_{k=1}^\infty \mu(E_{nk}) \leq \varepsilon + \sum_{k=1}^\infty \mu^*(B_n).
    \end{align*}
    Since $\varepsilon$ can be arbitrarily small, we have that Property (e) holds.
  \end{proof}

  \item \begin{definition}
    An {\bf outer measure} $\mu^*$ on a set $X$ is a function $\mu^*: \mcal{P}(X) \rightarrow [0,\infty]$ such that the following properties hold.
    \begin{enumerate}
      \item $\mu^*(\emptyset) = 0$.
      \item If $E \subseteq F \subseteq X$, then $\mu^*(E) \leq \mu^*(F)$.
      \item $\mu^*$ is {\bf countably subadditive}. In other words, if $\{ E_i \subseteq X : i \in \mathbb{N} \}$ is a countable collection of subsets of $X$, then
      \begin{align*}
          \mu^*\bigg( \bigcup_{i=1}^\infty E_i \bigg) \leq \sum_{i=1}^\infty \mu^*(E_i).
      \end{align*}
    \end{enumerate}
  \end{definition}

  \item Lemma~\ref{lemma:mu-prime-property} shows that $\mu^*$ is an outer measure on $X$ if $\mu$ is a premeasure on an algebra $\mcal{A}$ on $X$. The outer measure $\mu^*$ is called the {\bf outer measured generated by} $\mu$.  
  
  \item $\mu^*$ is defined for arbitrary subsets of $X$, so it is also defined on countable unions of subsets of $X$ as well. However, it is not yet a fully fledged measure because we cannot yet find a $\sigma$-algebra on which it is countably additive on.
  
  \item The following criterion is used to classify members of such a $\sigma$-algebra.
  
  \begin{definition}
    A subset $E$ of $X$ is said to be {\bf $\mu^*$-measurable} if
    $$ \mu^*(A) = \mu^*(A \cap E) + \mu^*(A \cap E^c) $$
    for every subset $A$ of $X$.
  \end{definition}

  \item A $\mu^*$-measurable set $E$ splits any set $A$ into pieces whose output measures add up to the outer measure of $A$. In other words, a set is $\mu^*$-measurable if it splits other sets in a ``nice'' way.
  
  \item \begin{theorem}[Carath\'{e}odory extension] Let $\mu^*$ be an outer measure on $X$. The collection of $\mu^*$-measurable sets is a $\sigma$-algebra on $X$. Moreover, $\mu^*$ is a measure on this collection.
  \end{theorem}
\end{itemize}

\section{Product Measures}

\section{Measurable Functions}

\section{Integration}

\begin{itemize}
  \item In this section, consider a fixed measurable space $(X,\mcal{X})$.
  
  \item \begin{definition}
    A function $f: X \rightarrow \Real$ is said to be {\bf $X$-measurable} (or simply {\bf measurable}) if, for every real number $\alpha$, the set $\{ x \in X : f(x) > \alpha \}$ is measurable (in other words, belongs to $\mcal{X}$).
  \end{definition}

  \item \begin{proposition}
  For a function $f: X \rightarrow \Real$, the following statements are equivalent.
  \begin{enumerate}
    \item[(a)] For every $\alpha \in \Real$, the set $A_\alpha = \{ x \in X : f(x) > \alpha \}$ belongs to $\mcal{X}$.
    \item[(b)] For every $\alpha \in \Real$, the set $B_\alpha = \{ x \in X : f(x) \geq \alpha \}$ belongs to $\mcal{X}$.
    \item[(c)] For every $\alpha \in \Real$, the set $C_\alpha = \{ x \in X : f(x) \leq alpha \}$ belongs to $\mcal{X}$.
    \item[(d)] For every $\alpha \in \Real$, the set $D_\alpha = \{ x \in X : f(x) < \alpha \}$ belongs to $\mcal{X}$. 
  \end{enumerate}
  \end{proposition}
\end{itemize}

\bibliographystyle{apalike}
\bibliography{measure-theory-primer}  
\end{document}

\item Before we go into defining what a measure and a $\sigma$-algebra are, let us explore similar concepts of outer measures and topological spaces.


  \item An outer measure has properties that we kind of expect of the notion of the ``volume'' of a set.
  \begin{itemize}
    \item The discusson about an outer measure is well scoped because there is a set $X$ acting as the universe of things we are interested in.
    \item It maps a set to a non-negative real number, and non-negative real numbers can be compared in terms of largeness.
    \item The volume of the empty set is zero.
    \item The volume of a subset is not more than the set that contains it.
    \item The volume of a union of sets is less than the sum of the volumes of individual sets.
  \end{itemize}
  However, it is still an ``outer'' measure, not a measure, because it lacks several nice properties that a measure has. We will cover this later.

  \item Requiring an outer measure to be defined on all elements of $\mcal{P}(X)$ might be too much. In fact, we only need it to be defined on countable unions of subsets of $X$. A ``topological space'' encapsulates the collection of sets where an outer measure can be discussed without going outside it.
  
  \begin{definition}
    A {\bf topological space} $(X,\mcal{T})$ is a set $X$ together with a collection $\mcal{T} \subseteq \mcal{P}(X)$ of subsets of $X$, called {\bf open sets}, such that the following properties hold.
    \begin{enumerate}
      \item $\emptyset, X \in \mcal{T}$.
      \item For any collection of open sets $\{ U_\alpha \in \mcal{T} : \alpha \in I \}$, the union of all sets are also open. In other words,
      \begin{align*}
          \bigcup_{\alpha \in I} U_\alpha \in \mcal{T}.
      \end{align*}
      Here, $I$ can be infinite and even not countable.
      \item Any finite intersection of open sets are also open. In other words, for any $U_1, U_2, \dotsc, U_k \in \mcal{T}$, we have that
      \begin{align*}
          \bigcup_{i=1}^n U_n \in \mcal{T}.
      \end{align*}
    \end{enumerate}
    The complement $E^c = X - E$ of an open set $E$ is said to be {\bf closed}. The collection $\mcal{T}$ is said to be a {\bf topology} on $X$.
  \end{definition}

  \item Let us compare the definition of a topological space with that of a $\sigma$-algebra. There are several differences.
  \begin{itemize}
    \item The complement of a measurable set is also measurable, but the complement of an open set is not required to be open.
    \item Countable unions of measurable sets are measurable, but arbitrary (even uncountable) unions of open sets are open.
    \item Countable intersections measurable sets are measurable, but only finite intersections of open sets are open.    
  \end{itemize}
  So, they are similar but quite different. Their properties do not combine in straightforward ways.


  \item In general, a Borel algebra can be defined from any topological space.
  
  \begin{definition}
    Let $(X, \mcal{T})$ be a topological space. The {\bf Borel $\sigma$-algebra} $$\mcal{B}(X) = \sigma(\mcal{T})$$ is the $\sigma$-algebra generated by the collection $\mcal{T}$ of open sets on $X$.
  \end{definition}

  \item Because any open (in sence of analysis) subset of $\Real$ can be throught of as a (possibly uncountable) union of open intervals, we have that the Borel algebra in Definition~\ref{def:borel-algebra} is in fact the Borel $\sigma$-algebra $\mcal{B}(\Real)$.
  
  \item Note the difference between a measure and an outer measure. A measure is countably additive, but an outer measure is countably subadditive.
